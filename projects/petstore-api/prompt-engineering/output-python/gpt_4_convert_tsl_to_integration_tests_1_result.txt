```python
import pytest
import requests

BASE_URL = "https://petstore3.swagger.io/api/v3"


@pytest.fixture
def create_pet():
    def _create_pet(name, status="available"):
        payload = {
            "name": name,
            "photoUrls": ["http://example.com/photo"],
            "status": status,
        }
        response = requests.post(f"{BASE_URL}/pet", json=payload)
        assert response.status_code == 200, f"Failed to create pet: {response.text}"
        return response.json()
    return _create_pet


@pytest.fixture
def delete_pet():
    def _delete_pet(pet_id):
        response = requests.delete(f"{BASE_URL}/pet/{pet_id}")
        assert response.status_code == 200, f"Failed to delete pet: {response.text}"
    return _delete_pet


# Scenario 1: Update pet with valid payload
def test_update_pet_valid_payload(create_pet, delete_pet):
    pet = create_pet(name="ValidPet")
    update_payload = {
        "id": pet["id"],
        "name": "UpdatedPet",
        "photoUrls": ["http://example.com/newphoto"],
        "status": "sold",
    }
    response = requests.put(f"{BASE_URL}/pet", json=update_payload)
    assert response.status_code == 200
    assert response.json()["name"] == "UpdatedPet"
    assert response.json()["status"] == "sold"
    delete_pet(pet["id"])


# Scenario 2: Update pet with invalid payload
def test_update_pet_invalid_payload(create_pet, delete_pet):
    pet = create_pet(name="InvalidPet")
    update_payload = {
        "id": pet["id"],
        "photoUrls": "invalid_photoUrls",
    }
    response = requests.put(f"{BASE_URL}/pet", json=update_payload)
    assert response.status_code == 400
    delete_pet(pet["id"])


# Scenario 3: Add pet with valid payload
def test_add_pet_valid_payload(delete_pet):
    payload = {"name": "NewPet", "photoUrls": ["http://example.com/photo"], "status": "available"}
    response = requests.post(f"{BASE_URL}/pet", json=payload)
    assert response.status_code == 200
    pet_id = response.json()["id"]
    delete_pet(pet_id)


# Scenario 4: Add pet with invalid payload
def test_add_pet_invalid_payload():
    payload = {"photoUrls": "invalid_photoUrls", "status": "available"}
    response = requests.post(f"{BASE_URL}/pet", json=payload)
    assert response.status_code == 400


# Scenario 5: Find pets by valid status
def test_find_pets_by_valid_status(create_pet, delete_pet):
    pet = create_pet(name="FindPet", status="available")
    response = requests.get(f"{BASE_URL}/pet/findByStatus", params={"status": "available"})
    assert response.status_code == 200
    assert any(p["id"] == pet["id"] for p in response.json())
    delete_pet(pet["id"])


# Scenario 6: Find pets by invalid status
def test_find_pets_by_invalid_status():
    response = requests.get(f"{BASE_URL}/pet/findByStatus", params={"status": "invalid_status"})
    assert response.status_code == 400


# Scenario 7: Find pets by valid tags
def test_find_pets_by_valid_tags(create_pet, delete_pet):
    pet = create_pet(name="TaggedPet")
    response = requests.get(f"{BASE_URL}/pet/findByTags", params={"tags": "example"})
    assert response.status_code == 200
    delete_pet(pet["id"])


# Scenario 8: Find pets by invalid tags
def test_find_pets_by_invalid_tags():
    response = requests.get(f"{BASE_URL}/pet/findByTags", params={"tags": 123})
    assert response.status_code == 400


# Scenario 9: Get pet by valid ID
def test_get_pet_by_valid_id(create_pet, delete_pet):
    pet = create_pet(name="GetPet")
    response = requests.get(f"{BASE_URL}/pet/{pet['id']}")
    assert response.status_code == 200
    assert response.json()["id"] == pet["id"]
    delete_pet(pet["id"])


# Scenario 10: Get pet by invalid ID
def test_get_pet_by_invalid_id():
    response = requests.get(f"{BASE_URL}/pet/0")
    assert response.status_code == 404


# Scenario 11: Delete pet with valid ID
def test_delete_pet_with_valid_id(create_pet):
    pet = create_pet(name="DeletePet")
    response = requests.delete(f"{BASE_URL}/pet/{pet['id']}")
    assert response.status_code == 200


# Scenario 12: Delete pet with invalid ID
def test_delete_pet_with_invalid_id():
    response = requests.delete(f"{BASE_URL}/pet/0")
    assert response.status_code == 400


# Scenario 13: Upload image with valid ID and payload
def test_upload_image_with_valid_id_and_payload(create_pet, delete_pet):
    pet = create_pet(name="ImagePet")
    files = {"file": ("example.jpg", b"image content", "image/jpeg")}
    response = requests.post(f"{BASE_URL}/pet/{pet['id']}/uploadImage", files=files)
    assert response.status_code == 200
    delete_pet(pet["id"])


# Scenario 14: Upload image with invalid ID
def test_upload_image_with_invalid_id():
    files = {"file": ("example.jpg", b"image content", "image/jpeg")}
    response = requests.post(f"{BASE_URL}/pet/0/uploadImage", files=files)
    assert response.status_code == 404


# Scenario 15: Upload image with no file
def test_upload_image_with_no_file(create_pet, delete_pet):
    pet = create_pet(name="NoFilePet")
    response = requests.post(f"{BASE_URL}/pet/{pet['id']}/uploadImage")
    assert response.status_code == 400
    delete_pet(pet["id"])
```